# 第5节：世界杯竞猜（subgraph2）



## 背景

| 玩家     | EOA地址                                    | 国家 | 备注     |
| -------- | ------------------------------------------ | ---- | -------- |
| 管理员   | 0xE8191108261f3234f1C2acA52a0D5C11795Aef9E |      | 负责开奖 |
| Account1 | 0xE8191108261f3234f1C2acA52a0D5C11795Aef9E | 0，1 |          |
| Account2 | 0xC4109e427A149239e6C1E35Bb2eCD0015B6500B8 | 0    |          |
| Account3 | 0x572ed8c1Aa486e6a016A7178E41e9Fc1E59CAe63 | 0    |          |

- 最终胜出国家：0，此时合约中一共有：4gwei，三个人平分：每个人获得 4/3 gwei，如果有剩余，则转给管理员。
- 合约地址：0xFdD506bAe16aD28516C407876Ca53618befB3502



## 接下来做什么

- 发行一个worldCupToken
- 按照玩家的参与度进行分配，由subgraph进行链下统计
- 玩家自己进行领取



## 技术选型

1. 使用链下签名方式，让用户链上claim：
   1. 需要为每个用户都生成一个链下的签名，由管理员签发；
   1. 好处是：分配时不需要调用合约；多期奖励可以一次领取；
   1. 代价是：需要入库，对后台要求更高
2. 使用merkel tree方式，对这一期所有的玩家进行统一设置，然后各自去claim：
   1. 好处是：不需要入库，直接设置一次merkelTree即可（由所有用户来当叶子节点）
   2. 代价是：需要调用一次合约；多期奖励无法一次领取。




